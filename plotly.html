<!DOCTYPE html>
<html lang="en">
<html>
<head>
    <script src='https://cdn.plot.ly/plotly-2.9.0.min.js'></script>
    <style>
        * {
          box-sizing: border-box;
        }
        .column {
          float: left;
          width: 50%;
          padding: 10px;
          height: 300px;
        }
        .row:after {
          content: "";
          display: table;
          clear: both;
        }
    </style>
</head>
<body>

<div id="testing"></div>

<div class="row">
    <div id="formDiv">
        <form id="form">
            <div class="column" style="background-color:rgb(4, 191, 248);">
            <label>Independent (<i>x</i>) values or labels</label>
            <div style="font-size:50%">separated by commas</div>
            <textarea id="x" name="x">Mon, Tues, Wed, Thurs, Fri</textarea>
            <br><br>
            <label>Independent (<i>x</i>) axis title</label>
            <br>
            <input id="xtitle" name="xtitle" type="text" value="x">
            <br><br>
            <label>Chart Title</label>
            <br>
            <input id="title" name="title" type="text" value="y vs. x">
            <br><br>
            <label>Chart Type</label>
            <br>
            <select id="chartType" name="chartType">
                <option value="bar">bar</option>
                <option value="scatter">scatter</option>
                <option value="line">line</option>
                <option value="pie">pie</option>
            </select>
            <br><br>
            
        </div>
        <div class="column" style="background-color:#bbb;">
            <label>Dependent (<i>y</i>) values</label>
            <div style="font-size:50%">separated by commas</div>
            <textarea id="y" name="y">5,7,3,9,11</textarea>
            <br><br>
            <label>Dependent (<i>y</i>) axis title</label>
            <br>
            <input id="ytitle" name="ytitle" type="text" value="y">
            <br><br>
            <label>Marker Color</label>
            <br>
            <input type="color" id="markerColor" name="markerColor" value="#636EFA">
            <br><br>
        </div>

        <div style="text-align:center;">
            <input type="submit" value="Update Chart" style="height:50px; width:100px; background-color:#FFFFFF;">
        </div>
    </form>
    </div>
</div>
<br>
<div id="instructions" style="text-align:center;color:lightgrey"></div>
<div id="chartDiv"></div>

<script>
function colorPickerFunction() {
  var marker_color = document.querySelector("#colorWell");
  marker_color.value = defaultColor;
  marker_color.addEventListener("input", updateFirst, false);
  marker_color.addEventListener("change", updateAll, false);
  marker_color.select();
}

var element = document.getElementById("form");
element.addEventListener("submit", function(event) {
    event.preventDefault();
    var x_values = document.getElementById("x").value;//.replace(/,\s/g, ',');
    var y_values = document.getElementById("y").value;//.replace(/,\s/g, ',');
    var x_title = document.getElementById("xtitle").value;
    var y_title = document.getElementById("ytitle").value;
    var title_value = document.getElementById("title").value;
    var chart_type = document.getElementById("chartType").value;
    var marker_color = document.getElementById("markerColor").value;
    //document.getElementById("testing").innerText = x_values+y_values;
    document.getElementById("instructions").innerText = "Click the ðŸ“¸ icon at the top right of the chart to download.";
    

    var data1 = {
        x: x_values.split(","),
        y: y_values.split(","),
        //name: 'Precipitation',
        type: chart_type,
        marker: {color: marker_color}
    };

    if (chart_type == 'scatter') {
        data1["mode"] = 'markers';
    }

    var layout = {
        title: title_value,
        xaxis: {title: x_title},
        yaxis: {title: y_title}
    };
    
    if (chart_type == "pie") {
        var data1 = {
            labels: x_values.split(","),
            values: y_values.split(","),
            type: chart_type
        };
        if (x_title == "x") {x_title = "";} // so that we don't have a legend title of "x"
        var layout = {
            title: title_value,
            showlegend: true,
            legend: {
                title: {text: x_title}
            }
        };
    }

    Plotly.newPlot('chartDiv', [data1], layout);
}, true);



</script>
</body>
</html>